<div class="dashboard">
  <div class="business-actions">
    <button mat-raised-button color="primary" (click)="openCreateDialog()">
      + Create New Business
    </button>

    <mat-form-field appearance="fill" class="business-select">
      <mat-label>Select Business</mat-label>
      <mat-select [(ngModel)]="selectedBusinessId" (selectionChange)="onSelectBusiness($event.value)">
        @for (biz of businesses; track biz.id) {
          <mat-option [value]="biz.id">
            {{ biz.name }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  @if (isLoading) {
    <p class="status-message">Loading businessesâ€¦</p>
  }
  @if (errorMessage) {
    <p class="error-message">{{ errorMessage }}</p>
  }

  @if (!isLoading && !errorMessage && businesses.length === 0) {
    <div class="status-message">
      No businesses yet. Create one to get started.
    </div>
  }

  @if (selectedBusiness) {
    <div>
      <h2>Welcome to {{ selectedBusiness.name }}</h2>
      @if (selectedBusiness.taxId) {
        <p>Tax ID: {{ selectedBusiness.taxId }}</p>
      }
    </div>
  }
</div>
